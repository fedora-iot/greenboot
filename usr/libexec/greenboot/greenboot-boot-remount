# skip if /boot is already writable
if [ ! -w /boot ]; then
  if [[ "$(readlink /proc/1/ns/mnt)" == "$(readlink /proc/self/ns/mnt)" ]]; then
      # reexec ourselves to unshare the mount namespace
      exec unshare -m $0 $@
  else
      # we are in a separate mount namespace, we can remount
      # without impacting the rest of the system
      mount -o remount,rw /boot
  fi
fi
